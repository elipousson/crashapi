[{"path":"/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2021 crashapi authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Eli Pousson. Author, maintainer. Kyle Walker. Copyright holder.            Author tigris helper functions bundled crashapi (see tigris-utils.R).","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Pousson E (2022). crashapi: CrashAPI. R package version 0.1.0.11.","code":"@Manual{,   title = {crashapi: CrashAPI},   author = {Eli Pousson},   year = {2022},   note = {R package version 0.1.0.11}, }"},{"path":"/index.html","id":"crashapi","dir":"","previous_headings":"","what":"An R package for accessing the Fatality Analysis Reporting System (FARS) API","title":"An R package for accessing the Fatality Analysis Reporting System (FARS) API","text":"goal crashapi R package provide functions downloading data National Highway Traffic Safety Administration (NHTSA) Fatality Analysis Reporting System (FARS) API. FARS? NHTSA explains: “Fatality Analysis Reporting System (FARS) contains data vehicle crashes United States occur public roadway involve fatality.” Supported APIs package include: Get Crash List Information Get Crash Details Get Crashes Location Get Crashes Vehicle Get Summary Counts Get Variables Get Variable Attributes Get FARS Data Year APIs support XML, JSV, CSV, JSON output formats. package uses JSON exception get_fars_year (supports downloading CSV files). Currently unsupported APIs include: Get Crashes Occupant reference, package also includes list terms NHTSA technical definitions fars_terms. FARS API currently provides access data 2010 2019. get_fars_zip function can used access FARS data files 1975 2019 available download NHTSA File Downloads site zipped CSV SAS files (available NHTSA FARS API). site also provides extensive technical documentation coding use FARS data files. Earlier data along data General Estimates System (GES) / Crash Report Sampling System (CRSS) also available Fatality Injury Reporting System Tool (FIRST). NHTSA website also provides additional information release data version status FARS data files:","code":""},{"path":"/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"An R package for accessing the Fatality Analysis Reporting System (FARS) API","text":"can install development version crashapi using remotes package:","code":"remotes::install_github(\"elipousson/crashapi\")"},{"path":"/index.html","id":"examples","dir":"","previous_headings":"","what":"Examples","title":"An R package for accessing the Fatality Analysis Reporting System (FARS) API","text":"","code":"library(crashapi) library(ggplot2) # Get fatal crashes in NY from 2019 with 5 to 10 vehicles get_fars(   year = 2019,   state = \"NY\",   vehicles = c(5, 10) ) #> Setting `api` to 'state list' based on the `get_fars()` parameters. #>      CountyName                  CrashDate Fatals Peds Persons St_Case State #> 1     BRONX (5) /Date(1549865820000-0500)/      2    1       7  360042    36 #> 2     ERIE (29) /Date(1551915000000-0500)/      1    0       4  360159    36 #> 3   ORANGE (71) /Date(1558274040000-0400)/      1    0       1  360277    36 #> 4   QUEENS (81) /Date(1561656240000-0400)/      1    0       6  360319    36 #> 5     BRONX (5) /Date(1561866000000-0400)/      1    0      11  360339    36 #> 6    KINGS (47) /Date(1564564080000-0400)/      1    0       5  360440    36 #> 7 SUFFOLK (103) /Date(1563792360000-0400)/      1    0       2  360551    36 #>   StateName TotalVehicles #> 1  New York             5 #> 2  New York             5 #> 3  New York             6 #> 4  New York             5 #> 5  New York             5 #> 6  New York             5 #> 7  New York             6 # Get fatal crashes for Baltimore County, MD from 2017 to 2018 baltimore_co_crashes <- get_fars(   year = c(2017, 2018),   state = \"MD\",   county = \"Baltimore County\",   geometry = TRUE )  # Show 10 fatal crashes at random dplyr::slice_sample(baltimore_co_crashes, n = 10) #> Simple feature collection with 10 features and 15 fields #> Geometry type: POINT #> Dimension:     XY #> Bounding box:  xmin: -76.80255 ymin: 39.25286 xmax: -76.45716 ymax: 39.66937 #> Geodetic CRS:  WGS 84 #>    CITY       CITYNAME COUNTY    COUNTYNAME CaseYear FATALS LATITUDE  LONGITUD #> 1     0 NOT APPLICABLE      5 BALTIMORE (5)     2017      2 39.25286 -76.45716 #> 2     0 NOT APPLICABLE      5 BALTIMORE (5)     2017      1 39.66937 -76.80255 #> 3     0 NOT APPLICABLE      5 BALTIMORE (5)     2018      1 39.30716 -76.72991 #> 4     0 NOT APPLICABLE      5 BALTIMORE (5)     2018      1 39.36017 -76.47853 #> 5     0 NOT APPLICABLE      5 BALTIMORE (5)     2017      1 39.62297 -76.79301 #> 6     0 NOT APPLICABLE      5 BALTIMORE (5)     2017      1 39.34727 -76.73358 #> 7     0 NOT APPLICABLE      5 BALTIMORE (5)     2017      1 39.37209 -76.72070 #> 8     0 NOT APPLICABLE      5 BALTIMORE (5)     2017      1 39.38242 -76.78916 #> 9     0 NOT APPLICABLE      5 BALTIMORE (5)     2018      1 39.39456 -76.49292 #> 10    0 NOT APPLICABLE      5 BALTIMORE (5)     2018      1 39.28437 -76.74683 #>    STATE STATENAME ST_CASE TOTALVEHICLES                      TWAY_ID TWAY_ID2 #> 1     24  Maryland  240197             6                        I-695          #> 2     24  Maryland  240483             2                        CR-14    CR-15 #> 3     24  Maryland  240347             1 SOCIAL SECURITY HEADQUARTERS          #> 4     24  Maryland  240052             1                         I-95          #> 5     24  Maryland  240167             1                        SR-25          #> 6     24  Maryland  240099             1                      CR-1901          #> 7     24  Maryland  240462             1                       SR-140          #> 8     24  Maryland  240246             2                      CR-2250  CR-2200 #> 9     24  Maryland  240493             1                      CR-1400  CR-4090 #> 10    24  Maryland  240273             1                        US-40          #>    VE_FORMS                   geometry #> 1         6 POINT (-76.45716 39.25286) #> 2         2 POINT (-76.80255 39.66937) #> 3         1 POINT (-76.72991 39.30716) #> 4         1 POINT (-76.47853 39.36017) #> 5         1 POINT (-76.79301 39.62297) #> 6         1 POINT (-76.73358 39.34727) #> 7         1  POINT (-76.7207 39.37209) #> 8         2 POINT (-76.78916 39.38242) #> 9         1 POINT (-76.49292 39.39456) #> 10        1 POINT (-76.74683 39.28437) # Map crashes ggplot() +   geom_sf(     data = tigris::county_subdivisions(state = \"MD\", county = \"Baltimore County\"),     fill = NA, color = \"black\"   ) +   geom_sf(     data = baltimore_co_crashes,     aes(color = TOTALVEHICLES),     alpha = 0.75   ) +   theme_void() #>   |                                                                              |                                                                      |   0%  |                                                                              |                                                                      |   1%  |                                                                              |=                                                                     |   1%  |                                                                              |=                                                                     |   2%  |                                                                              |==                                                                    |   2%  |                                                                              |==                                                                    |   3%  |                                                                              |===                                                                   |   4%  |                                                                              |===                                                                   |   5%  |                                                                              |====                                                                  |   5%  |                                                                              |====                                                                  |   6%  |                                                                              |=====                                                                 |   7%  |                                                                              |=====                                                                 |   8%  |                                                                              |======                                                                |   8%  |                                                                              |======                                                                |   9%  |                                                                              |=======                                                               |   9%  |                                                                              |=======                                                               |  10%  |                                                                              |=======                                                               |  11%  |                                                                              |========                                                              |  11%  |                                                                              |========                                                              |  12%  |                                                                              |=========                                                             |  13%  |                                                                              |==========                                                            |  14%  |                                                                              |==============                                                        |  20%  |                                                                              |=================                                                     |  24%  |                                                                              |====================                                                  |  28%  |                                                                              |=========================================                             |  58%  |                                                                              |=============================================                         |  64%  |                                                                              |==============================================                        |  65%  |                                                                              |===============================================                       |  67%  |                                                                              |======================================================================| 100% # Get summary crash count and fatal crash count data for Maryland from 2010 to 2019 md_summary <-   get_fars(     year = c(2010, 2019),     state = \"MD\",     api = \"summary count\"   )  ggplot(md_summary, aes(x = CaseYear, y = TotalFatalCounts)) +   geom_point(color = \"red\") +   geom_line(color = \"red\", group = 1) +   theme_minimal()"},{"path":"/index.html","id":"related-packages-and-projects","dir":"","previous_headings":"","what":"Related packages and projects","title":"An R package for accessing the Fatality Analysis Reporting System (FARS) API","text":"stats19 “provides functions downloading formatting road crash data” “UK’s official road traffic casualty database, STATS19.” njtr1: “R interface New Jersey traffic crash data reported form NJTR-1.” nzcrash: “R package distribute New Zealand crash data convenient form.” GraphHopper Open Traffic Collection: “Collections URLs pointing traffic information portals contain open data least data free use.” Open Crash Data Index: Google Sheet listing range city, county, regional state sources crash data including non-injury crashes well fatal crashes available FARS API. Contributions crash data U.S. cities adn states welcome.","code":""},{"path":"/reference/crashapi-package.html","id":null,"dir":"Reference","previous_headings":"","what":"crashapi: CrashAPI — crashapi-package","title":"crashapi: CrashAPI — crashapi-package","text":"Get Fatality Analysis Reporting System (FARS) data FARS API.","code":""},{"path":"/reference/crashapi-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"crashapi: CrashAPI — crashapi-package","text":"Maintainer: Eli Pousson eli.pousson@gmail.com (ORCID) contributors: Kyle Walker kyle@walker-data.com (Author tigris helper functions bundled crashapi (see tigris-utils.R).) [copyright holder]","code":""},{"path":"/reference/fars_terms.html","id":null,"dir":"Reference","previous_headings":"","what":"NHSTA Terms and Defintions — fars_terms","title":"NHSTA Terms and Defintions — fars_terms","text":"FARS-related terms defined National Highway Traffic   Safety Administration based ANSI D16.1-1996: Manual Classification   Motor Vehicle Traffic Accidents.","code":""},{"path":"/reference/fars_terms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"NHSTA Terms and Defintions — fars_terms","text":"","code":"fars_terms"},{"path":"/reference/fars_terms.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"NHSTA Terms and Defintions — fars_terms","text":"data frame 66 rows 2 variables: term character Term definition character Term definition","code":""},{"path":"/reference/fars_terms.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"NHSTA Terms and Defintions — fars_terms","text":"NHTSA FARS Terms","code":""},{"path":"/reference/fars_vars.html","id":null,"dir":"Reference","previous_headings":"","what":"Get variables and variable attributes for the Fatality Analysis\n  Reporting System (FARS) API — fars_vars","title":"Get variables and variable attributes for the Fatality Analysis\n  Reporting System (FARS) API — fars_vars","text":"default, function returns returns list   variables data year specified. `vars` \"make\", \"model\",   \"bodytype\", function returns #'   list variable attributes   specified variable name attributes make model body type   specified FARS dataset.","code":""},{"path":"/reference/fars_vars.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get variables and variable attributes for the Fatality Analysis\n  Reporting System (FARS) API — fars_vars","text":"","code":"fars_vars(year, var = NULL, make = NULL, model = NULL)"},{"path":"/reference/fars_vars.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get variables and variable attributes for the Fatality Analysis\n  Reporting System (FARS) API — fars_vars","text":"year Case year. Year must 2010 2019. var Default NULL. Supported values \"make\", \"model\", \"bodytype\". Using var parameter returns variable attributes specified variable name attributes make model body type specified dataset. make Integer. Make ID number. Required return variables \"model\" \"bodytype\". Get list make ID numbers using \"make\" var selected year, e.g. `fars_vars(year = 2010, var = \"make\")`. model Integer. Model ID number. Required return variables \"bodytype\". Get list model ID numbers using \"model\" var selected year valid make ID number, e.g. `fars_vars(year = 2010, var = \"model\", make = 37)`","code":""},{"path":"/reference/get_fars.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Fatality Analysis Reporting System (FARS) data with the FARS API — get_fars","title":"Get Fatality Analysis Reporting System (FARS) data with the FARS API — get_fars","text":"function provides convenient interface accessing FARS data data summaries using range criteria. api parameter allows call one following functions access DOT NHTSA’s Crash API: get_fars_crash_list returns list fatal crashes occurred multiple states one years. get_fars_crash_details returns details fatal crash occurred state single year. get_fars_crashes list fatal crashes location occurred throughout U.S. get_fars_summary provides count injury severity occurred throughout U.S. including count fatalities crashes. get_fars_year provides one 20 FARS data tables single year. Supports downloading CSV JSON file. get_fars_crash_list get_fars_crashes limit returned data 5000 records consider limiting range years requested data exceeds threshold. package also enables access FARS data available NHTSA data downloads server zip format. Set api \"zip\" use get_fars_zip function download data.","code":""},{"path":"/reference/get_fars.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Fatality Analysis Reporting System (FARS) data with the FARS API — get_fars","text":"","code":"get_fars(   year = 2019,   state,   county = NULL,   api = c(\"crashes\", \"details\", \"state list\", \"summary count\", \"year dataset\", \"zip\"),   geometry = FALSE,   crs = 4326,   type,   case,   details = NULL,   vehicles,   pr,   format,   path = NULL,   download = FALSE )  get_fars_crashes(   year = NULL,   start_year,   end_year,   state,   county = NULL,   geometry = FALSE,   crs = 4326 )  get_fars_crash_details(   year = 2019,   state,   case,   geometry = FALSE,   crs = 4326,   details = NULL )  get_fars_crash_list(   year = NULL,   start_year,   end_year,   state,   vehicles = c(1, 50) )  get_fars_summary(year = NULL, start_year, end_year, state)  get_fars_year(   year = 2017,   type = \"accident\",   format = \"json\",   path = NULL,   download = FALSE )"},{"path":"/reference/get_fars.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Fatality Analysis Reporting System (FARS) data with the FARS API — get_fars","text":"year numeric vector. Year range start end year. api \"details\", \"year dataset\", \"zip\" (using get_fars_crash_details, get_fars_year, get_fars_zip functions), single year required. api options support range minimum value used start year maximum value used end year. api options support years 2010 2019. \"year dataset\" supports 2010 2017 \"zip\" supports 1975 2019. start_year end_year ignored year NULL. state Required. State name, abbreviation, FIPS number. get_fars_crash_list supports multiple states. county County name FIPS number. Required get_fars_crashes. api character. API function use. Supported values include \"crashes\", \"details\", \"state list\", \"summary count\", \"year dataset\", \"zip\". Default: \"crashes\". geometry TRUE, return sf object. Optional get_fars_crashes. crs Coordinate reference system return get_fars_crashes geometry TRUE. type Name dataset data file download using \"year dataset\" api get_fars_year. Supported values include \"ACCIDENT\", \"CEVENT\", \"DAMAGE\", \"DISTRACT\", \"DRIMPAIR\", \"FACTOR\", \"MANEUVER\", \"NMCRASH\", \"NMIMPAIR\", \"NMPRIOR\", \"PARKWORK\", \"PBTYPE\", \"PERSON\", \"SAFETYEQ\", \"VEHICLE\", \"VEVENT VINDECODE\", \"VINDERIVED\", \"VIOLATION\", \"VISION\", \"VSOE\". Lowercase mixed case values permitted. case Case number. Required api \"details\" using get_fars_crash_details. Multiple case numbers can provided. details Type detailed crash data return (either \"events\" \"vehicles\"). NULL, events vehicle data excluded data returned get_fars_crash_details. Optional get_fars_crash_details. Default: NULL. vehicles numeric vector minimum maximum number vehicles, e.g. c(1, 2) minimum 1 vehicle maximum 2. Required get_fars_crash_list. pr logical. TRUE api \"zip\", download FARS data Puerto Rico. Puerto Rico data available years 1975-1977. Default: FALSE format Default \"json\". \"csv\" supported using \"year dataset\" api. \"sas\" supporting \"zip\" api. path File path used download TRUE. download logical. TRUE api \"year dataset\" \"zip\", download data file. Default FALSE. start_year Start year crash reports. end_year End year crash reports.","code":""},{"path":"/reference/get_fars_crash_vehicles.html","id":null,"dir":"Reference","previous_headings":"","what":"Get Crashes By Vehicle — get_fars_crash_vehicles","title":"Get Crashes By Vehicle — get_fars_crash_vehicles","text":"function returns list fatal crashes vehicle type   occurred throughout United States. make, model, body type   must match options returned `fars_vars`. function accepts named   options converted ID numbers use API query.","code":""},{"path":"/reference/get_fars_crash_vehicles.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get Crashes By Vehicle — get_fars_crash_vehicles","text":"","code":"get_fars_crash_vehicles(   year = NULL,   start_year,   end_year,   state,   make = NULL,   model = NULL,   model_year = 2010,   body_type = NULL )"},{"path":"/reference/get_fars_crash_vehicles.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get Crashes By Vehicle — get_fars_crash_vehicles","text":"year numeric vector. Year range start end year. 2010 2019 supported. start_year Start year crash reports. end_year End year crash reports. state Required. State name, abbreviation, FIPS number. make Make name ID, Required. start_year used return list support make options. Default: NULL model Model name ID, Optional. Default: NULL model_year Model year, Optional. Default: NULL body_type Body type, Optional. `model` must provided use body_type parameter. Default: NULL","code":""},{"path":"/reference/get_fars_zip.html","id":null,"dir":"Reference","previous_headings":"","what":"Download FARS data files as zipped CSV or SAS files — get_fars_zip","title":"Download FARS data files as zipped CSV or SAS files — get_fars_zip","text":"function provides alternative get_fars_year downloads files directly NHTSA FTP site.","code":""},{"path":"/reference/get_fars_zip.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download FARS data files as zipped CSV or SAS files — get_fars_zip","text":"","code":"get_fars_zip(year = 2019, format = \"csv\", path = NULL, pr = FALSE)"},{"path":"/reference/get_fars_zip.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download FARS data files as zipped CSV or SAS files — get_fars_zip","text":"year Year data 1975 2019, Default: 2019 format Format zipped data tables ('csv' 'sas'). Default: 'csv'. path Path download zip file FARS tables. pr TRUE, download FARS data Puerto Rico. Puerto Rico data available years 1975-1977. Default: FALSE","code":""},{"path":"/reference/get_fars_zip.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download FARS data files as zipped CSV or SAS files — get_fars_zip","text":"Downloads zip file CSV SAS tables.","code":""},{"path":"/news/index.html","id":"crashapi-01011","dir":"Changelog","previous_headings":"","what":"crashapi 0.1.0.11","title":"crashapi 0.1.0.11","text":"feat: add get_fars() function uses api parameter call different APIs feat: import helper functions {tigris} package improve renamed lookup_fips() function feat: Add get_fars_crash_vehicles support downloading crash data vehicle make, model, /body type fix: get_fars_year using correct query URL download = TRUE refactor: relocate helper functions utils.R refactor: rename make_query() helper function read_api() refactor: update validate_year() helper function work {checkmate} package refactor: update default values year, start_year, end_year parameters docs: Update README pkgdown site","code":""},{"path":"/news/index.html","id":"crashapi-01010","dir":"Changelog","previous_headings":"","what":"crashapi 0.1.0.10","title":"crashapi 0.1.0.10","text":"feat: get_fars_zip added provide alternate (non-API) method downloading zipped CSV SAS data files fix: get_fars_crash_details updated return data frame w/o list columns feat: get_fars_crash_details updated optionally return vehicle crash events data frames","code":""},{"path":"/news/index.html","id":"crashapi-0109","dir":"Changelog","previous_headings":"","what":"crashapi 0.1.0.9","title":"crashapi 0.1.0.9","text":"docs: Revise README update pkgdown site fix: Add missing imports DESCRIPTION fix: Update county_to_fips() support partial county names, e.g. “Adams” instead “Adams County” avoiding matching multiple counties (closes #1) feat: Update get_fars_crash_details() return sf objects using geometry parameter refactor: Set API calls w/ unexported utility function (make_query)","code":""},{"path":"/news/index.html","id":"crashapi-010","dir":"Changelog","previous_headings":"","what":"crashapi 0.1.0","title":"crashapi 0.1.0","text":"Added functions accessing FARS APIs including Get Crash List Information, Get Crash Details, Get Crashes Location, Get Summary Counts, Get FARS Data Year (documented get_fars()) Added functions accessing FARS APIs including Get Variables Get Variable Attributes (documented get_fars_vars()) Added fars_terms data terms definitions National Highway Traffic Safety Administration (NHTSA) website Added NEWS.md file track changes package. Set pkgdown website","code":""}]
